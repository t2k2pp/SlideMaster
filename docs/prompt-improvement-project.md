# プロンプト改善プロジェクト

## 🎯 目標
デザイナーを本来の「レイアウト担当」に戻し、AIの創造性を最大活用する。
内容の専門性・正確性は共通で、見せ方・配置だけを変える本来の設計に戻す。

## 🚨 重要な制約
- **ユーザー向け機能は一切削除しない**
- **既存のデザイナー選択肢は全て維持**  
- **プロンプト内部ロジックのみ改善**
- **段階的実施で目的を見失わない**

## 📋 実施計画

### Phase 1: コンテンツ生成の純化 ✅ **COMPLETED**
**目標**: デザイナー関係なく、AIの知識で最高品質の内容生成

- [x] **1.1** MarpContentService の過度な制約削除
  - 物語系プロンプトの簡素化
  - AI知識を活用できるプロンプトに変更
- [x] **1.2** BaseDesignerStrategy の共通コンテンツ生成強化
  - デザイナー固有の内容変更を削除
  - レイアウト指示のみに特化
- [x] **1.3** 完了テスト
  - ✅ 桃太郎: AI創造性復活、優秀な物語生成確認
  - ⚠️ クリティカルシンキング: トークンオーバーフロー問題発見

### Phase 2: デザイナー役割正常化 ⏳
**目標**: 各デザイナーをレイアウト・配置担当に戻す

- [ ] **2.1** Academic Visualizer の修正
  - ❌ 学術的言葉遣い変換を削除
  - ✅ 体系的配置・情報密度高め・構造化のみ
- [ ] **2.2** Emotional Storyteller の修正  
  - ❌ 内容の物語化を削除
  - ✅ 魅力的見せ方・つかみのある配置のみ
- [ ] **2.3** Corporate Strategist の修正
  - ビジネス文書風配置に特化
- [ ] **2.4** Amateur Designer の修正
  - カジュアルで親しみやすい配置に特化
- [ ] **2.5** 完了テスト
  - 同一内容で4デザイナーの配置違いを確認

### Phase 3: Auto選択の賢化 ⏳
**目標**: トピックに応じた適切なデザイナー・Purpose選択

- [ ] **3.1** トピック別デザイナー選択ロジック実装
  - 「育て方・栽培」→ Amateur(90%) / Academic(10%)
  - 「ビジネス戦略」→ Corporate(80%) / Academic(20%)
  - 「物語・昔話」→ Emotional(90%) / Amateur(10%)
- [ ] **3.2** Purpose自動選択の改善
  - 不適切な組み合わせの排除
  - トピック適合性の向上
- [ ] **3.3** 完了テスト
  - 各トピックで適切な組み合わせ確認

### Phase 4: 画像生成適正化 🔄 **PARTIAL**
**目標**: 意味のある画像のみ生成、データなしグラフ禁止

- [x] **4.1** 不適切画像生成の禁止機能
  - データなしグラフ・表の生成完全禁止
  - 内容適合性事前チェック
- [x] **4.2** SVG可視化機能の追加
  - 実データがある場合のグラフ生成
  - 動的SVG生成機能
- [x] **4.3** 完了テスト
  - ❌ チャーシュー料理: まだ学術的・ビジネス風画像が生成される
  - 🔍 **根本原因**: Context Intelligence Engineでの料理→technical誤分類

## 📝 進捗記録

### 2025-01-11
- **プロジェクト開始**: 管理ドキュメント作成完了
- **開始時刻**: 10:XX AM

### 2025-08-11
- **Phase 1完了**: AI創造性復活に成功
- **Phase 4部分実装**: ImageContentValidator実装済み
- **🚨 CRITICAL**: Context Intelligence Engineでキーワードマッチング残存
  - 研究|分析|理論|手法 など
  - 戦略|効率|収益|市場 など
  - **明確に「やめて」と指示されたのに実装されていない**
- **🚨 CRITICAL**: プロンプトハードコーディング問題
  - リソース化されておらず改修困難
  - 不適切なプロンプト特定が困難

---

## 🧪 テスト用トピック

### 基本テストケース
1. **ミニトマトの育て方** (実践的内容期待)
2. **桃太郎の紙芝居** (物語系)  
3. **マーケティング戦略の立案** (ビジネス系)

### 期待結果
- **内容**: 全て高品質でAIの知識を活用
- **配置**: デザイナー毎に異なる見せ方
- **画像**: 内容に本当に合致するもののみ

---

## ❗ 注意事項
- 各Phase完了時に必ずテスト実施
- 問題発生時は即座に記録・対応
- ユーザー機能に影響する変更は絶対に避ける